# Jetbot_seminar

我写一下基本的框架，也就是今天说的内容，后面我会附图片。
主要分为四个模块：路径算法，数据采集，电机驱动控制，中央处理。

* 路径算法， 主要是计算路径及规划，建立地图，向中央处理单元发送指令建议
* 数据采集， 主要是相机识别二维码，识别两侧前方的Apritag，处理IMU数据，并将数据进行封装打包
* 电机驱动， 主要是电机控制，PID或者其他控制算法，过程姿态矫正，(可能也会有滤波器)
* 中央处理， 主要是处理逻辑的算法。处理其他三个部分的信息处理。

其中数据采集的模块需要与电机驱动和中央处理进行数据交互，提供小车的实时位置信息。
交互的方式以自定义的数据类(JLocation)交互。
路径算法单独和中央处理进行交互。

### 具体的流程：
相机采样，IMU采样，数据处理，传给中央处理和电机驱动，中央处理收到当前位置后根据路径算法的输出，向电机驱动传入目标位置，电机驱动通过数据采集的反馈进行控制，从而使小车到达指定位置。而当小车到达指定位置后，电机驱动向中央处理返回一个判断值，中央处理接受返回值后，读取路径算法的下一个节点信息，或写入当前节点，从而进行执行地图或者建立地图。

### 自定义的数据类的说明：
为了更好的管理复杂的数据包，我们不使用简单的字典或者列表，而是使用类(Class)，好处是复杂的数据可以通过调用方法或者属性进行获取指定的数据，编写代码更容易，同时也更易读。

### 大致的任务分配，
* 金俊帆处理路径算法部分，以及数据类的创建。
* 王怡豪处理数据采集
* 李砚和万峰佑处理电机驱动

之后的数据类将在代码的推进过程中不断地维护更新


### 写代码的建议：

1.  声明
由于是多人合作，这时函数/方法的声明就非常重要，如：
```python
def function(a: int = 0, b: str | int = 0, c: None)->int:
	if not c:
		c = 20
	if isinstance(b, str):
		b = int(b)
	d = a + b
	if isinstance(c, str) and c == 'test_code':
		print(c)

 	return d
```


2.  注释
上面的代码如果没有注释，理解起来就比较难，需要仔细看逻辑，这样效率很低，毕竟调用时，并不需要具体的代码内部逻辑，所以每个方法/函数都需要写注释
方法内的注释也需要写，以便更快更轻松地Debug

3.  类
建议每个模块至少是写一个类，方便后续的实例化。如果使用面向过程，有些部分很难做到多线程，比较麻烦

4.  方法
尽可能细化方法，不要写一个庞大且复杂的方法，维护很困难，初期可以一点一点堆建，但是之后一定要拆成多个方法，充分利用代码的复用，不要重复写同一段代码。这样改Bug时，很难理清逻辑。
比如：
我想打开多个文件，将文件内的\t字符改为\n，那么至少需要写为三个方法：(数目不固定)
修改文件字符、打开读取并写入单个文件、打开并写入多个文件、(罗列需要处理的文件列表)
这样之后一但出现需要再次打开单个文件读取时，就可以直接调用而不需要写新函数，Debug时逻辑也更清晰